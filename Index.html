<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Financial Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="chart.min.js"></script>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíº</text></svg>"
    />
  </head>

  <body>
    <div class="app-container">
      <!-- SIDEBAR -->
      <div class="sidebar">
        <div class="sidebar-logo">
          <h2>üíº HawkwardFinances</h2>
          <p>Accounts & Management</p>
        </div>
        <ul class="sidebar-nav">
          <li>
            <button class="nav-btn active" data-tab="profile">
              üë§ Profiles
            </button>
          </li>
          <li>
            <button class="nav-btn" data-tab="accounts">üìã Expenses</button>
          </li>
          <li>
            <button class="nav-btn" data-tab="timeline">üìÖ Timeline</button>
          </li>
          <li>
            <button class="nav-btn" data-tab="analytics">üìä Reports</button>
          </li>
          <li>
            <button class="nav-btn" data-tab="settings">‚öôÔ∏è Settings</button>
          </li>
        </ul>
      </div>
    
      <!-- MAIN CONTENT -->
      <div class="main-content">
        <div class="header">
          <h1 id="pageTitle">üë§ Profiles</h1>
        </div>

        <div class="content-area">
          <!-- TAB: My Profile -->
          <div id="profile" class="tab-content active">
            <h2 class="page-title-section">üë§ My Cards</h2>
            <p class="page-description">Create and manage your profile cards</p>
            <div class="mb-20">
              <button class="btn-primary" onclick="showCreateCardModal()">
                ‚ûï Create New Card
              </button>
            </div>
            <div class="family-grid" id="cardsGrid"></div>
          </div>

          <!-- TAB: Timeline (3 Years) -->
          <div id="timeline" class="tab-content">
            <h2 class="page-title-section" id="timelineTitle">
              3-Year Financial Timeline
            </h2>
            <div class="mb-20">
              <label class="font-bold mr-10">Starting Balance (‚Ç¨):</label>
              <input
                type="number"
                id="startingBalanceInput"
                step="0.01"
                class="input-primary"
                aria-label="Starting Balance"
              />
            </div>

            <div class="timeline-table-wrapper">
              <div class="timeline-controls">
                <button id="saveTimelineBtn" class="btn-success">
                  üíæ Save Timeline Data
                </button>
              </div>
              <table>
                <thead>
                  <tr>
                    <th>Year - Month</th>
                    <th>Income (‚Ç¨)</th>
                    <th>Expenses (‚Ç¨)</th>
                    <th>Balance (‚Ç¨)</th>
                  </tr>
                </thead>
                <tbody id="timelineBody"></tbody>
              </table>
            </div>

            <div class="chart-container chart-container-tall">
              <h3 id="chartTitle">3-Year Balance Projection</h3>
              <canvas id="balanceChart"></canvas>
            </div>
          </div>

          <!-- TAB: Account Overview -->
          <div id="analytics" class="tab-content">
            <h2 class="page-title-section">Account Inventory & Analysis</h2>

            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-label">Total Accounts</div>
                <div class="stat-value" id="totalAccounts">3</div>
              </div>
              <div class="stat-card">
                <div class="stat-label">Paid Subscriptions</div>
                <div class="stat-value" id="paidSubscriptions">11</div>
              </div>
              <div class="stat-card">
                <div class="stat-label">Monthly Cost</div>
                <div class="stat-value" id="monthlyCost">‚Ç¨1,220</div>
              </div>
              <div class="stat-card">
                <div class="stat-label">Annual Recurring</div>
                <div class="stat-value" id="annualCost">‚Ç¨14,642</div>
              </div>
            </div>

            <div class="charts-grid">
              <div class="chart-container">
                <h3>Accounts by Category</h3>
                <canvas id="categoryChart"></canvas>
              </div>
              <div class="chart-container">
                <h3>Monthly Cost Distribution</h3>
                <canvas id="costChart"></canvas>
              </div>
            </div>

            <div class="charts-grid">
              <div class="chart-container">
                <h3>Criticality Levels</h3>
                <canvas id="criticalityChart"></canvas>
              </div>
              <div class="chart-container">
                <h3>Account Status</h3>
                <canvas id="statusChart"></canvas>
              </div>
            </div>
          </div>

          <!-- TAB: All Accounts -->
          <div id="accounts" class="tab-content">
            <div class="table-wrapper">
              <div class="table-controls">
                <button id="addAccountBtn" class="btn-primary" onclick="toggleAddForm()">
                  ‚ûï Add Account
                </button>
                <select
                  id="categoryFilter"
                  onchange="filterAccounts()"
                  class="form-filter"
                  aria-label="Filter by Category"
                >
                  <option value="">All Categories</option>
                  <option value="Government & Legal">Government & Legal</option>
                  <option value="Health & Insurance">Health & Insurance</option>
                  <option value="Banking & Finance">Banking & Finance</option>
                  <option value="Utilities & Bills">Utilities & Bills</option>
                  <option value="Shopping & E-Commerce">Shopping & E-Commerce</option>
                  <option value="Productivity & Work">Productivity & Work</option>
                  <option value="Developer Tools">Developer Tools</option>
                  <option value="Entertainment & Streaming">
                    Entertainment & Streaming
                  </option>
                  <option value="Gaming">Gaming</option>
                  <option value="AI Tools">AI Tools</option>
                  <option value="Social Media">Social Media</option>
                  <option value="Travel & Booking">Travel & Booking</option>
                  <option value="Transportation">Transportation</option>
                  <option value="Food & Dining">Food & Dining</option>
                  <option value="Household & Home">Household & Home</option>
                  <option value="Education & Learning">
                    Education & Learning
                  </option>
                  <option value="Health & Wellness">Health & Wellness</option>
                  <option value="Clothing & Fashion">Clothing & Fashion</option>
                  <option value="Personal Care & Beauty">
                    Personal Care & Beauty
                  </option>
                  <option value="Hobbies & Leisure">Hobbies & Leisure</option>
                  <option value="Pet Care">Pet Care</option>
                  <option value="Cloud Storage & Backup">
                    Cloud Storage & Backup
                  </option>
                  <option value="Subscriptions & Memberships">
                    Subscriptions & Memberships
                  </option>
                  <option value="Family & Child">Family & Child</option>
                  <option value="Other">Other</option>
                </select>
              </div>

              <table>
                <thead>
                  <tr>
                    <th
                      onclick="sortTable('id')"
                      data-sort="id"
                      class="cursor-pointer"
                    >
                      # ‚Üï
                    </th>
                    <th
                      onclick="sortTable('name')"
                      data-sort="name"
                      class="cursor-pointer"
                    >
                      Service Name ‚Üï
                    </th>
                    <th
                      onclick="sortTable('category')"
                      data-sort="category"
                      class="cursor-pointer"
                    >
                      Category ‚Üï
                    </th> 
                    <th
                      onclick="sortTable('monthlyPayment')"
                      data-sort="monthlyPayment"
                      class="cursor-pointer"
                    >
                      Monthly ‚Üï
                    </th>
                    <th
                      onclick="sortTable('annualPayment')"
                      data-sort="annualPayment"
                      class="cursor-pointer"
                    >
                      Annual ‚Üï
                    </th>
                    <th
                      onclick="sortTable('hasReminder')"
                      data-sort="hasReminder"
                      class="cursor-pointer"
                    >
                      Paid? ‚Üï
                    </th>
                    <th
                      onclick="sortTable('status')"
                      data-sort="status"
                      class="cursor-pointer"
                    >
                      Status ‚Üï
                    </th>
                    <th
                      onclick="sortTable('priority')"
                      data-sort="priority"
                      class="cursor-pointer"
                    >
                      Criticality ‚Üï
                    </th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="accountsBody"></tbody>
              </table>
            </div>
          </div>

          <!-- TAB: Settings -->
          <div id="settings" class="tab-content">
            <h2 class="page-title-section">Application Settings</h2>
            <p class="page-description">
              Customize your experience and manage your data
            </p>

            <div class="settings-grid">
              <!-- Visual Settings -->
              <div class="settings-card">
                <div class="settings-card-header">
                  <h3>üé® Visuals</h3>
                </div>
                <div class="settings-item">
                  <label>Primary Theme Color</label>
                  <input
                    type="color"
                    id="settingPrimaryColor"
                    class="color-picker"
                  />
                </div>
                <!-- <div class="settings-item">
                  <label>Dark Mode</label>
                  <div class="toggle-switch">
                    <input type="checkbox" id="settingDarkMode" />
                    <span class="slider"></span>
                  </div>
                </div> -->
              </div>

              <!-- Localization Settings -->
              <div class="settings-card">
                <div class="settings-card-header">
                  <h3>üåç Localization</h3>
                </div>
                <div class="settings-item">
                  <label>Currency Symbol</label>
                  <select id="settingCurrency" class="form-filter">
                    <option value="‚Ç¨">Euro (‚Ç¨)</option>
                    <option value="$">Dollar ($)</option>
                    <option value="¬£">Pound (¬£)</option>
                    <option value="¬•">Yen (¬•)</option>
                  </select>
                </div>
              </div>

              <!-- Data Management -->
              <div class="settings-card">
                <div class="settings-card-header">
                  <h3>üìÇ Data Management</h3>
                </div>
                <div class="settings-actions-vertical">
                  <button class="btn-primary w-full" onclick="exportData()">
                    üì§ Export JSON Backup
                  </button>
                  <button class="btn-success w-full" onclick="downloadCSV()">
                    üìä Download Expenses CSV
                  </button>
                  <button
                    class="btn-info w-full"
                    onclick="document.getElementById('importFile').click()"
                  >
                    üì• Import JSON Data
                  </button>
                  <input
                    type="file"
                    id="importFile"
                    accept=".json"
                    style="display: none"
                    onchange="importData(event)"
                  />
                  <button
                    class="btn-danger w-full"
                    onclick="showFactoryResetModal()"
                  >
                    ‚ö†Ô∏è Factory Reset
                  </button>
                </div>
              </div>

              <!-- System Settings -->
              <div class="settings-card">
                <div class="settings-card-header">
                  <h3>‚öôÔ∏è System</h3>
                </div>
                <!-- <div class="settings-item">
                  <label>Auto-Shutdown</label>
                  <div class="toggle-switch">
                    <input type="checkbox" id="settingAutoShutdown" />
                    <span class="slider"></span>
                  </div>
                </div> -->
                <div class="settings-item flex-column">
                  <div class="flex-between w-full mb-10">
                    <label>Inactivity Timeout</label>
                    <span id="timeoutDisplay" class="font-bold">15s</span>
                  </div>
                  <input
                    type="range"
                    id="settingTimeout"
                    min="10"
                    max="1800"
                    step="10"
                    class="range-slider w-full"
                  />
                  <div class="flex-between w-full mt-5">
                    <span class="text-xs">10s</span>
                    <span class="text-xs">30m</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- MODAL: Factory Reset Confirmation -->
      <div id="resetModal" class="modal">
        <div class="modal-content">
          <div class="modal-header">‚ö†Ô∏è Factory Reset</div>
          <div class="modal-body" style="padding: 20px 0">
            <p>
              This will clear all your profiles, accounts, and timeline data.
            </p>
            <p style="margin-top: 15px">
              <label class="flex-center gap-10 cursor-pointer">
                <input type="checkbox" id="includeSeedData" checked />
                <span>Include default seed data</span>
              </label>
            </p>
          </div>
          <div class="modal-actions">
            <button class="btn-secondary" onclick="closeResetModal()">
              Cancel
            </button>
            <button class="btn-primary" onclick="confirmFactoryReset()">
              Confirm Reset
            </button>
          </div>
        </div>
      </div>

      <!-- MODAL: Create/Edit Card -->
      <div id="cardModal" class="modal">
        <div class="modal-content">
          <div class="modal-header" id="cardModalTitle">
            Create Profile Card
          </div>

          <!-- Step 1: Template Selection -->
          <div class="template-selector" id="templateSelector">
            <div
              class="template-option selected"
              onclick="selectTemplate('adult')"
            >
              <span class="template-icon">üë®‚Äçüíº</span>
              <div class="template-label">Adult</div>
            </div>
            <div class="template-option" onclick="selectTemplate('child')">
              <span class="template-icon">üß∏</span>
              <div class="template-label">Child</div>
            </div>
            <div class="template-option" onclick="selectTemplate('pet')">
              <span class="template-icon">üêæ</span>
              <div class="template-label">Pet</div>
            </div>
          </div>

          <!-- Step 2: Emoji Picker -->
          <div class="emoji-section">
            <label class="emoji-label">Choose Avatar</label>
            <div class="emoji-grid" id="emojiGrid">
              <!-- Emojis injected via JS -->
            </div>
          </div>

          <!-- Step 3: Dynamic Form -->
          <div class="modal-form" id="cardForm">
            <!-- Fields injected via JS based on template -->
          </div>

          <div class="modal-actions">
            <button class="btn-secondary" onclick="closeCardModal()">
              Cancel
            </button>
            <button class="btn-primary" onclick="saveCard()">
              Save Profile
            </button>
          </div>
        </div>
      </div>

      <!-- MODAL: Add/Edit Account -->
      <div id="accountModal" class="modal">
        <div class="modal-content">
          <div class="modal-header" id="modalTitle">Add New Account</div>
          <div class="modal-form" id="accountForm">
            <div class="form-group">
              <label>Service Name *</label>
              <input
                type="text"
                id="formService"
                required
                aria-label="Service Name"
              />
            </div>
            <div class="form-group">
              <label>Category *</label>
              <select id="formCategory" required aria-label="Service Category">
                <option value="">Select Category</option>
                <option>Government & Legal</option>
                <option>Health & Insurance</option>
                <option>Banking & Finance</option>
                <option>Utilities & Bills</option>
                <option>Shopping & E-Commerce</option>
                <option>Productivity & Work</option>
                <option>Developer Tools</option>
                <option>Entertainment & Streaming</option>
                <option>Gaming</option>
                <option>AI Tools</option>
                <option>Social Media</option>
                <option>Travel & Booking</option>
                <option>Transportation</option>
                <option>Food & Dining</option>
                <option>Household & Home</option>
                <option>Education & Learning</option>
                <option>Health & Wellness</option>
                <option>Clothing & Fashion</option>
                <option>Personal Care & Beauty</option>
                <option>Hobbies & Leisure</option>
                <option>Pet Care</option>
                <option>Cloud Storage & Backup</option>
                <option>Subscriptions & Memberships</option>
                <option>Family & Child</option>
                <option>Other</option>
              </select>
            </div>
            <div class="form-group">
              <label>Monthly Cost (‚Ç¨)</label>
              <input
                type="number"
                id="formMonthlyCost"
                min="0"
                step="0.01"
                value="0"
                aria-label="Monthly Cost"
              />
            </div>
            <div class="form-group">
              <label>Annual Cost (‚Ç¨)</label>
              <input
                type="number"
                id="formAnnualCost"
                min="0"
                step="0.01"
                value="0"
                aria-label="Annual Cost"
              />
            </div>
            <div class="form-group">
              <label>Paid? *</label>
              <select id="formPaid" required aria-label="Payment Status">
                <option value="">Select Status</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>
            <div class="form-group">
              <label>Status *</label>
              <select id="formStatus" required aria-label="Account Status">
                <option value="">Select Status</option>
                <option value="Active">Active</option>
                <option value="Planned">Planned</option>
                <option value="Dormant">Dormant</option>
                <option value="Cancelled">Cancelled</option>
              </select>
            </div>
            <div class="form-group">
              <label>Criticality *</label>
              <select
                id="formCriticality"
                required
                aria-label="Criticality Level"
              >
                <option value="">Select Level</option>
                <option value="Critical">Critical</option>
                <option value="Essential">Essential</option>
                <option value="Important">Important</option>
                <option value="Optional">Optional</option>
              </select>
            </div>
          </div>
          <div class="modal-actions">
            <button class="btn-danger" onclick="closeAccountModal()">
              ‚ùå Cancel
            </button>
            <button class="btn-success" onclick="saveAccount()">
              üíæ Save Account
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Load configuration, then application -->
    <script src="config.js"></script>
    <script src="app.js"></script>
  </body>
</html>
